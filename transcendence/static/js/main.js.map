{
  "version": 3,
  "sources": ["../../frontend/logger.js", "../../frontend/theme.js", "../../frontend/chat/WSService.js", "../../frontend/chat/UserService.js", "../../frontend/chat/MessageService.js", "../../frontend/chat/UIHandler.js", "../../frontend/chat/ChatApp.js", "../../frontend/main.js"],
  "sourcesContent": ["class Logger {\n\tconstructor() {\n\t\tthis.debugSettings = false;\n\t\tthis.logLevel = 'ERROR';\n\t\tthis.levels = {\n\t\t\t'DEBUG': 10,\n\t\t\t'INFO': 20,\n\t\t\t'WARN': 30,\n\t\t\t'ERROR': 40\n\t\t};\n\t\tthis.currentLevel = this.levels['ERROR'];\n\t\tthis.queue = [];\n\t\tthis.initialized = false;\n\t}\n\n\tinitialize() {\n\t\tconst bodyElement = document.body;\n\t\tthis.debugSettings = bodyElement.dataset.debug === 'True';\n\t\tthis.logLevel = bodyElement.dataset.logLevel || 'ERROR';\n\t\tthis.currentLevel = this.levels[this.logLevel.toUpperCase()] || this.levels['ERROR'];\n\t\tthis.initialized = true;\n\t\tthis.processQueue();\n\t}\n\n\tprocessQueue() {\n\t\twhile (this.queue.length > 0) {\n\t\t\tconst { level, messages } = this.queue.shift();\n\t\t\tthis.log(level, ...messages);\n\t\t}\n\t}\n\n\tlog(level, ...messages) {\n\t\tif (!this.initialized) {\n\t\t\tthis.queue.push({ level, messages });\n\t\t\treturn;\n\t\t}\n\t\tif (this.levels[level.toUpperCase()] >= this.currentLevel) {\n\t\t\tconsole[level.toLowerCase()](...messages);\n\t\t}\n\t}\n\n\tdebug(...messages) {\n\t\tthis.log('DEBUG', ...messages);\n\t}\n\n\tinfo(...messages) {\n\t\tthis.log('INFO', ...messages);\n\t}\n\n\twarn(...messages) {\n\t\tthis.log('WARN', ...messages);\n\t}\n\n\terror(...messages) {\n\t\tthis.log('ERROR', ...messages);\n\t}\n}\n\nexport default Logger;\n\n// Create and export a global logger instance\nexport const logger = new Logger();\n", "// Theme and Font Size Management\n\n// Get stored theme and font size preferences, or set defaults\nconst themeLocal = localStorage.getItem('themeLocal') || 'light';\nconst sizeLocal = localStorage.getItem('sizeLocal') || 'small';\n\n// Get DOM elements\nconst navbarBrand = document.querySelector('.navbar-brand');\nconst btn = document.querySelector('.btn');\nconst formControls = document.querySelectorAll('.form-control');\nconst toggleFontSizeBtn = document.getElementById('toggleFontSizeBtn');\n\n// Font size application function\nfunction applyFontSize(size) {\n\tif (size == 'large') {\n\t\tlocalStorage.setItem('sizeLocal', 'large');\n\t\tdocument.body.style.fontSize = '1.5rem';\n\t\tif (navbarBrand) navbarBrand.style.fontSize = '1.5rem';\n\t\tif (btn) btn.style.fontSize = '1.5rem';\n\t\tif (formControls) {\n\t\t\tformControls.forEach(function (formControl) {\n\t\t\t\tformControl.style.fontSize = '1.5rem';\n\t\t\t\tformControl.style.paddingTop = '3rem';\n\t\t\t\tformControl.style.paddingBottom = '2rem';\n\t\t\t});\n\t\t}\n\t} else {\n\t\tlocalStorage.setItem('sizeLocal', 'small');\n\t\tdocument.body.style.fontSize = '1rem';\n\t\tif (navbarBrand) navbarBrand.style.fontSize = '1.25rem';\n\t\tif (btn) btn.style.fontSize = '1rem';\n\t\tif (formControls) {\n\t\t\tformControls.forEach(function (formControl) {\n\t\t\t\tformControl.style.fontSize = '1rem';\n\t\t\t\tformControl.style.padding = '0.375rem 0.75rem';\n\t\t\t});\n\t\t}\n\t}\n}\n\n// Theme application function\nfunction applyTheme(theme) {\n\tlocalStorage.setItem('themeLocal', theme);\n\tdocument.documentElement.setAttribute('data-bs-theme', theme);\n\tvar themeIcon = document.getElementById('themeIcon');\n\tif (themeIcon) {\n\t\tswitch (theme) {\n\t\t\tcase 'light':\n\t\t\t\tthemeIcon.setAttribute('d', 'M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708');\n\t\t\t\tbreak;\n\t\t\tcase 'dark':\n\t\t\t\tthemeIcon.setAttribute('d', 'M6 .278a.77.77 0 0 1 .08.858 7.2 7.2 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277q.792-.001 1.533-.16a.79.79 0 0 1 .81.316.73.73 0 0 1-.031.893A8.35 8.35 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.75.75 0 0 1 6 .278M4.858 1.311A7.27 7.27 0 0 0 1.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.32 7.32 0 0 0 5.205-2.162q-.506.063-1.029.063c-4.61 0-8.343-3.714-8.343-8.29 0-1.167.242-2.278.681-3.286');\n\t\t\t\tbreak;\n\t\t\tcase 'high-contrast':\n\t\t\t\tthemeIcon.setAttribute('d', 'M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0');\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n\n// Initialize theme and font size\nfunction initializeThemeAndFontSize() {\n\tapplyFontSize(sizeLocal);\n\tapplyTheme(themeLocal);\n\n\tif (toggleFontSizeBtn) {\n\t\ttoggleFontSizeBtn.checked = sizeLocal === 'large';\n\t\ttoggleFontSizeBtn.addEventListener('click', function () {\n\t\t\tapplyFontSize(this.checked ? 'large' : 'small');\n\t\t});\n\t}\n\n\tdocument.getElementById('light')?.addEventListener('click', () => applyTheme('light'));\n\tdocument.getElementById('dark')?.addEventListener('click', () => applyTheme('dark'));\n\tdocument.getElementById('highContrast')?.addEventListener('click', () => applyTheme('high-contrast'));\n}\n\nexport { initializeThemeAndFontSize, applyTheme, applyFontSize };\n", "export default class WSService {\n\tconstructor(url) {\n\t\tthis.url = url;\n\t\tthis.socket = null;\n\t\tthis.messageQueue = [];\n\t\tthis.isConnected = false;\n\t\tthis.onMessageCallbacks = [];\n\t\tthis.onOpenCallbacks = [];\n\t\tthis.onCloseCallbacks = [];\n\t\tthis.onErrorCallbacks = [];\n\t\tthis.reconnectAttempts = 0;\n\t\tthis.maxReconnectAttempts = 5;\n\t\tthis.initialize();\n\t}\n\n\tinitialize() {\n\t\tthis.connect();\n\t}\n\n\tconnect() {\n\t\tthis.socket = new WebSocket(this.url);\n\n\t\tthis.socket.onopen = () => {\n\t\t\tconsole.debug('WebSocket connected');\n\t\t\tthis.isConnected = true;\n\t\t\tthis.reconnectAttempts = 0;\n\t\t\tthis.processQueue();\n\t\t\tthis.onOpenCallbacks.forEach(callback => callback());\n\t\t};\n\n\t\tthis.socket.onmessage = (e) => {\n\t\t\tconst data = JSON.parse(e.data);\n\t\t\tthis.onMessageCallbacks.forEach(callback => callback(data));\n\t\t};\n\n\t\tthis.socket.onclose = (e) => {\n\t\t\tconsole.warn(`WebSocket closed: ${e.code}, Reason: ${e.reason}`);\n\t\t\tthis.isConnected = false;\n\t\t\tthis.onCloseCallbacks.forEach(callback => callback(e));\n\t\t\tthis.handleReconnection();\n\t\t};\n\n\t\tthis.socket.onerror = (err) => {\n\t\t\tconsole.error('WebSocket error:', err);\n\t\t\tthis.onErrorCallbacks.forEach(callback => callback(err));\n\t\t};\n\t}\n\n\thandleReconnection() {\n\t\tif (this.reconnectAttempts < this.maxReconnectAttempts) {\n\t\t\tconst delay = Math.min(1000 * Math.pow(2, this.reconnectAttempts), 60000);\n\t\t\tconsole.info(`Reconnect attempt ${this.reconnectAttempts + 1} in ${delay}ms`);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.reconnectAttempts++;\n\t\t\t\tthis.connect();\n\t\t\t}, delay);\n\t\t} else {\n\t\t\tconsole.error('Max reconnect attempts reached.');\n\t\t\talert('Unable to reconnect. Please refresh the page.');\n\t\t}\n\t}\n\n\tsend(message) {\n\t\tif (this.isConnected) {\n\t\t\tthis.socket.send(JSON.stringify(message));\n\t\t} else {\n\t\t\tconsole.warn('WebSocket not connected. Queueing message.');\n\t\t\tthis.messageQueue.push(message);\n\t\t\tif (this.socket.readyState === WebSocket.CLOSED) {\n\t\t\t\tthis.connect();\n\t\t\t}\n\t\t}\n\t}\n\n\tprocessQueue() {\n\t\twhile (this.messageQueue.length > 0 && this.isConnected) {\n\t\t\tconst message = this.messageQueue.shift();\n\t\t\tthis.send(message);\n\t\t}\n\t}\n\n\tonMessage(callback) {\n\t\tthis.onMessageCallbacks.push(callback);\n\t}\n\n\tonOpen(callback) {\n\t\tthis.onOpenCallbacks.push(callback);\n\t}\n\n\tonClose(callback) {\n\t\tthis.onCloseCallbacks.push(callback);\n\t}\n\n\tonError(callback) {\n\t\tthis.onErrorCallbacks.push(callback);\n\t}\n}", "export default class UserService {\n\tconstructor() {\n\t\tthis.currentUserId = this.getCurrentUserId();\n\t}\n\n\tgetCurrentUserId() {\n\t\tconst userId = document.body.dataset.userId;\n\t\tif (!userId) {\n\t\t\tconsole.error('User ID not found in body dataset.');\n\t\t\treturn null;\n\t\t}\n\t\treturn parseInt(userId, 10);\n\t}\n\n\tgetUserName(userId) {\n\t\tconst userElement = document.querySelector(`.user-chat[data-user-id=\"${userId}\"]`);\n\t\treturn userElement ? userElement.querySelector('.user-name').textContent.trim() : 'Unknown User';\n\t}\n\n\tgetUserStatusIcon(userId) {\n\t\tconst status = this.getUserStatus(userId);\n\t\tswitch (status) {\n\t\t\tcase 'online':\n\t\t\t\treturn '&#x1F7E2;'; // Green circle\n\t\t\tcase 'offline':\n\t\t\t\treturn '&#x26AA;'; // White circle\n\t\t\tcase 'blocked':\n\t\t\t\treturn '&#x1F534;'; // Red circle\n\t\t\tdefault:\n\t\t\t\treturn '&#x26AA;'; // Offline\n\t\t}\n\t}\n\n\tgetUserStatus(userId) {\n\t\tconst userElement = document.querySelector(`.user-chat[data-user-id=\"${userId}\"]`);\n\t\tif (userElement) {\n\t\t\tif (userElement.classList.contains('online')) return 'online';\n\t\t\tif (userElement.classList.contains('blocked')) return 'blocked';\n\t\t}\n\t\treturn 'offline';\n\t}\n\n\tupdateUserStatus(userId, status) {\n\t\tconst userElement = document.querySelector(`.user-chat[data-user-id=\"${userId}\"]`);\n\t\tif (userElement) {\n\t\t\tconst statusIcon = userElement.querySelector('.status-icon');\n\t\t\tstatusIcon.innerHTML = this.getUserStatusIcon(userId);\n\t\t\tuserElement.classList.remove('online', 'offline', 'blocked');\n\t\t\tuserElement.classList.add(status);\n\n\t\t\t// Update message bubbles\n\t\t\tconst messageBubbles = document.querySelectorAll(`.chat-bubble[data-user-id=\"${userId}\"] .status-icon`);\n\t\t\tmessageBubbles.forEach(icon => {\n\t\t\t\ticon.innerHTML = this.getUserStatusIcon(userId);\n\t\t\t\ticon.classList.remove('online', 'offline', 'blocked');\n\t\t\t\ticon.classList.add(status);\n\t\t\t});\n\t\t}\n\t}\n}", "export default class MessageService {\n\tconstructor(uiHandler, userService) {\n\t\tthis.uiHandler = uiHandler;\n\t\tthis.userService = userService;\n\t}\n\n\taddMessage(message, senderId, timestamp, isSent) {\n\t\tsenderId = parseInt(senderId, 10);\n\t\tconst messageElement = document.createElement('div');\n\t\tmessageElement.classList.add('chat-bubble', isSent ? 'sent' : 'received');\n\t\tmessageElement.setAttribute('data-user-id', senderId);\n\n\t\tconst senderName = isSent ? 'You' : this.userService.getUserName(senderId) || 'Unknown User';\n\n\t\tconst formattedTimestamp = timestamp\n\t\t\t? new Date(timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n\t\t\t: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n\n\t\tconst statusIconHTML = !isSent ? `\n            <span class=\"status-icon\" aria-label=\"User status\">\n                ${this.userService.getUserStatusIcon(senderId)}\n            </span>\n        ` : '';\n\n\t\tmessageElement.innerHTML = `\n            <div class=\"message-header\">\n                <span class=\"sender-name\">${senderName}</span>\n                ${statusIconHTML}\n            </div>\n            <p>${message}</p>\n            <small>${formattedTimestamp}</small>\n        `;\n\n\t\tthis.uiHandler.messageHistory.appendChild(messageElement);\n\t\tthis.uiHandler.messageHistory.scrollTop = this.uiHandler.messageHistory.scrollHeight;\n\t}\n}", "export default class UIHandler {\n\tconstructor(chatApp) {\n\t\tthis.chatApp = chatApp;\n\t\tthis.messageHistory = document.getElementById('message-history');\n\t\tthis.chatForm = document.querySelector('#chat-form');\n\t\tthis.chatCanvas = document.getElementById('ChatCanvas');\n\t\tthis.chatHeading = document.getElementById('chatHeading');\n\t\tthis.unreadBadge = document.getElementById('unreadBadge');\n\t\tthis.chatIcon = document.querySelector('.chat-icon i');\n\t\tthis.chatBadge = document.querySelector('.chat-badge');\n\t\tthis.attachEventListeners();\n\t}\n\n\tattachEventListeners() {\n\t\tif (this.chatForm) {\n\t\t\tthis.chatForm.addEventListener('submit', (e) => this.chatApp.handleFormSubmit(e));\n\t\t}\n\t\tdocument.querySelectorAll('.user-chat').forEach(element => {\n\t\t\telement.addEventListener('click', (e) => this.chatApp.handleUserClick(e));\n\t\t});\n\t\tdocument.querySelectorAll('.block-user, .unblock-user').forEach(element => {\n\t\t\telement.addEventListener('click', (e) => this.chatApp.handleUserBlockToggle(e));\n\t\t});\n\t\tdocument.querySelectorAll('.invite-pong, .view-profile').forEach(element => {\n\t\t\telement.addEventListener('click', (e) => this.chatApp.handleSpecialActions(e));\n\t\t});\n\t\tif (this.chatCanvas) {\n\t\t\tthis.chatCanvas.addEventListener('show.bs.offcanvas', () => this.chatApp.resetUnreadMessageCount());\n\t\t\tthis.chatCanvas.addEventListener('hide.bs.offcanvas', () => this.chatApp.setChatModalOpen(false));\n\t\t}\n\t}\n\n\tupdateChatIcon(unreadCount) {\n\t\tif (unreadCount > 0) {\n\t\t\tthis.chatIcon.classList.remove('text-secondary');\n\t\t\tthis.chatIcon.classList.add('text-primary');\n\t\t\tthis.chatBadge.textContent = unreadCount > 99 ? '99+' : unreadCount;\n\t\t\tthis.chatBadge.style.display = 'inline';\n\t\t} else {\n\t\t\tthis.chatIcon.classList.remove('text-primary');\n\t\t\tthis.chatIcon.classList.add('text-secondary');\n\t\t\tthis.chatBadge.style.display = 'none';\n\t\t}\n\t}\n\n\tupdateChatHeading(userName, messageCount) {\n\t\tthis.chatHeading.textContent = `Chat with ${userName}`;\n\t\tthis.unreadBadge.textContent = messageCount;\n\n\t\tlet visuallyHidden = this.unreadBadge.querySelector('.visually-hidden');\n\t\tif (!visuallyHidden) {\n\t\t\tvisuallyHidden = document.createElement('span');\n\t\t\tvisuallyHidden.className = 'visually-hidden';\n\t\t\tthis.unreadBadge.appendChild(visuallyHidden);\n\t\t}\n\t\tvisuallyHidden.textContent = `${messageCount} messages`;\n\t}\n\n\tdisplayProfileModal(profile) {\n\t\tconst existingModal = document.querySelector('.profile-modal');\n\t\tif (existingModal) {\n\t\t\tdocument.body.removeChild(existingModal);\n\t\t}\n\n\t\tconst modal = document.createElement('div');\n\t\tmodal.classList.add('profile-modal');\n\t\tmodal.innerHTML = `\n            <h2>${profile.username}'s Profile</h2>\n            <p>Email: ${profile.email}</p>\n            <p>Bio: ${profile.bio}</p>\n            <img src=\"${profile.profile_picture}\" alt=\"Profile Picture\">\n        `;\n\t\tdocument.body.appendChild(modal);\n\n\t\tmodal.addEventListener('click', () => {\n\t\t\tdocument.body.removeChild(modal);\n\t\t});\n\t}\n}", "import WSService from './WSService.js';\nimport UserService from './UserService.js';\nimport MessageService from './MessageService.js';\nimport UIHandler from './UIHandler.js';\n\nexport default class ChatApp {\n\tconstructor() {\n\t\tthis.WSService = null;\n\t\tthis.userService = new UserService();\n\t\tthis.uiHandler = new UIHandler(this);\n\t\tthis.messageService = new MessageService(this.uiHandler, this.userService);\n\t\tthis.messageCountByUser = {};\n\t\tthis.setupCSRFTokenWatcher();\n\t}\n\n\tsetupCSRFTokenWatcher() {\n\t\tif (this.getCSRFToken()) {\n\t\t\tthis.initializeWebSocket();\n\t\t} else {\n\t\t\tthis.tokenCheckInterval = setInterval(() => {\n\t\t\t\tif (this.getCSRFToken()) {\n\t\t\t\t\tthis.initializeWebSocket();\n\t\t\t\t\tclearInterval(this.tokenCheckInterval);\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t}\n\t}\n\n\tinitializeWebSocket() {\n\t\tconst protocol = window.location.protocol === 'https:' ? 'wss://' : 'ws://';\n\t\tconst wsUrl = `${protocol}${window.location.host}/ws/chat/`;\n\n\t\tthis.WSService = new WSService(wsUrl);\n\n\t\tthis.WSService.onMessage((data) => this.handleMessage(data));\n\t\tthis.WSService.onClose(() => this.handleClose());\n\t\tthis.WSService.onOpen(() => this.handleOpen());\n\t}\n\n\t// TODO : Implement JWT auth\n\tgetAccessToken() {\n\t\t// Implement this method to retrieve the access token\n\t\t// from wherever it's stored (e.g., localStorage)\n\t\treturn localStorage.getItem('accessToken');\n\t}\n\n\thandleMessage(data) {\n\t\tconsole.debug(\"Received data:\", data);\n\t\tswitch (data.type) {\n\t\t\tcase 'chat_message':\n\t\t\t\tthis.messageService.addMessage(data.message, data.sender_id, data.timestamp, false);\n\t\t\t\tif (!this.chatModalOpen) this.incrementUnreadMessageCount();\n\t\t\t\tbreak;\n\t\t\tcase 'game_invitation':\n\t\t\t\tthis.handleGameInvitation(data.game_id, data.sender_id);\n\t\t\t\tbreak;\n\t\t\tcase 'tournament_warning':\n\t\t\t\tthis.handleTournamentWarning(data.tournament_id, data.match_time);\n\t\t\t\tbreak;\n\t\t\tcase 'user_profile':\n\t\t\t\tthis.uiHandler.displayProfileModal(data.profile);\n\t\t\t\tbreak;\n\t\t\tcase 'user_status_change':\n\t\t\t\tthis.userService.updateUserStatus(data.user_id, data.status);\n\t\t\t\tbreak;\n\t\t\tcase 'error':\n\t\t\t\talert(\"Error: \" + data.error);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.warn('Unknown message type:', data.type);\n\t\t}\n\t}\n\n\thandleClose() {\n\t\tconsole.warn('WebSocket closed.');\n\t\tthis.WSService.handleReconnection();\n\t}\n\n\thandleOpen() {\n\t\tconsole.debug('WebSocket connection established');\n\t\tthis.reconnectAttempts = 0;\n\t\tthis.WSService.processQueue();\n\t}\n\n\thandleFormSubmit(e) {\n\t\te.preventDefault();\n\t\tconst messageInput = document.querySelector('#chat-message');\n\t\tconst message = messageInput.value.trim();\n\t\tif (!message) return;\n\n\t\tconst activeUser = document.querySelector('.user-chat.active');\n\t\tif (!activeUser) {\n\t\t\talert(\"Please select a user to chat with.\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst recipientId = activeUser.dataset.userId;\n\t\tif (!this.userService.currentUserId) {\n\t\t\talert(\"Unable to send message. User ID not found.\");\n\t\t\treturn;\n\t\t}\n\n\t\tconsole.info(`Sending message to user ${recipientId}: ${message}`);\n\t\tthis.WSService.send({\n\t\t\ttype: 'chat_message',\n\t\t\tmessage: message,\n\t\t\trecipient_id: recipientId\n\t\t});\n\n\t\tthis.messageService.addMessage(message, this.userService.currentUserId, new Date(), true);\n\t\tmessageInput.value = '';\n\t}\n\n\thandleUserClick(e) {\n\t\te.preventDefault();\n\t\tconst userId = e.currentTarget.dataset.userId;\n\t\tthis.selectedUserId = userId;\n\t\tdocument.querySelectorAll('.user-chat').forEach(el => el.classList.remove('active'));\n\t\te.currentTarget.classList.add('active');\n\t\tthis.loadMessageHistory(userId);\n\t\tdocument.getElementById('chat-form-div').style.display = 'block';\n\t\tthis.updateChatHeading(userId);\n\t\tthis.messageCountByUser[userId] = 0;\n\t\tthis.uiHandler.updateChatIcon(0);\n\t}\n\n\tloadMessageHistory(userId) {\n\t\tfetch(`/chat/history/${userId}/`, {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'X-CSRFToken': this.getCSRFToken(),\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t}\n\t\t})\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\tthis.uiHandler.messageHistory.innerHTML = '';\n\t\t\t\tthis.messageCountByUser[userId] = data.length;\n\t\t\t\tconsole.debug(\"Message history loaded:\", data);\n\t\t\t\tdata.forEach(message => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst isSent = message.sender_id === this.userService.currentUserId;\n\t\t\t\t\t\tthis.messageService.addMessage(message.content, message.sender_id, new Date(message.timestamp), isSent);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error('Error adding message:', error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.uiHandler.messageHistory.scrollTop = this.uiHandler.messageHistory.scrollHeight;\n\t\t\t\tthis.updateChatHeading(userId);\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.error('Error loading message history:', error);\n\t\t\t});\n\t}\n\n\tupdateChatHeading(userId) {\n\t\tconst userName = this.userService.getUserName(userId);\n\t\tconst messageCount = this.messageCountByUser[userId] || 0;\n\t\tthis.uiHandler.updateChatHeading(userName, messageCount);\n\t}\n\n\thandleUserBlockToggle(e) {\n\t\te.preventDefault();\n\t\tconst element = e.currentTarget;\n\t\tconst userId = element.dataset.userId;\n\t\tconst action = element.classList.contains('block-user') ? 'block' : 'unblock';\n\t\tconst method = action === 'block' ? 'POST' : 'DELETE';\n\n\t\tfetch(`/chat/${action}/${userId}/`, {\n\t\t\tmethod: method,\n\t\t\theaders: {\n\t\t\t\t'X-CSRFToken': this.getCSRFToken(),\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({})\n\t\t})\n\t\t\t.then(response => {\n\t\t\t\tif (response.ok) return response.json();\n\t\t\t\tthrow new Error('Network response was not ok.');\n\t\t\t})\n\t\t\t.then(data => {\n\t\t\t\tif (data.success) {\n\t\t\t\t\tif (action === 'block') {\n\t\t\t\t\t\telement.textContent = 'Unblock';\n\t\t\t\t\t\telement.classList.remove('block-user', 'btn-danger');\n\t\t\t\t\t\telement.classList.add('unblock-user', 'btn-secondary');\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.textContent = 'Block';\n\t\t\t\t\t\telement.classList.remove('unblock-user', 'btn-secondary');\n\t\t\t\t\t\telement.classList.add('block-user', 'btn-danger');\n\t\t\t\t\t}\n\t\t\t\t\tthis.userService.updateUserStatus(userId, action === 'block' ? 'blocked' : 'online');\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.error('Error:', error);\n\t\t\t\talert('An error occurred while processing your request.');\n\t\t\t});\n\t}\n\n\thandleSpecialActions(e) {\n\t\tconst userId = e.currentTarget.dataset.userId;\n\t\tconst isInvitePong = e.currentTarget.classList.contains('invite-pong');\n\t\tconst type = isInvitePong ? 'game_invitation' : 'get_profile';\n\n\t\tconst payload = isInvitePong\n\t\t\t? { type: 'game_invitation', recipient_id: userId, game_id: 'pong' }\n\t\t\t: { type: 'user_profile', user_id: userId };\n\n\t\tthis.WSService.send(payload);\n\t}\n\n\thandleGameInvitation(gameId, senderId) {\n\t\tif (confirm(`You've been invited to play ${gameId}. Do you want to accept?`)) {\n\t\t\twindow.location.href = `/games/${gameId}/?opponent=${senderId}`;\n\t\t}\n\t}\n\n\thandleTournamentWarning(tournamentId, matchTime) {\n\t\talert(`Your next match in tournament ${tournamentId} is scheduled for ${matchTime}`);\n\t}\n\n\tincrementUnreadMessageCount() {\n\t\tthis.unreadMessageCount++;\n\t\tthis.uiHandler.updateChatIcon(this.unreadMessageCount);\n\t}\n\n\tresetUnreadMessageCount() {\n\t\tthis.unreadMessageCount = 0;\n\t\tthis.uiHandler.updateChatIcon(this.unreadMessageCount);\n\t}\n\n\tsetChatModalOpen(isOpen) {\n\t\tthis.chatModalOpen = isOpen;\n\t\tif (isOpen) {\n\t\t\tthis.resetUnreadMessageCount();\n\t\t}\n\t}\n\n\tgetCSRFToken() {\n\t\tconst cookieValue = document.cookie\n\t\t\t.split('; ')\n\t\t\t.find(row => row.startsWith('csrftoken='));\n\t\treturn cookieValue ? cookieValue.split('=')[1] : null;\n\t}\n\n\tdestroy() {\n\t\tif (this.tokenCheckInterval)\n\t\t\tclearInterval(this.tokenCheckInterval);\n\t}\n}", "import { logger } from './logger.js';\nimport { initializeThemeAndFontSize } from './theme.js';\nimport ChatApp from './chat/ChatApp.js';\n\nfunction initializeChatApp() {\n\tif (window.chatApp) {\n\t\tconsole.warn('ChatApp already initialized');\n\t\treturn;\n\t}\n\n\ttry {\n\t\twindow.chatApp = new ChatApp();\n\t\tconsole.log('ChatApp initialized successfully');\n\t} catch (error) {\n\t\tconsole.error('Failed to initialize ChatApp:', error);\n\t}\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\tlogger.initialize();\n\tinitializeThemeAndFontSize();\n\tinitializeChatApp();\n});\n"],
  "mappings": "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",
  "names": []
}
